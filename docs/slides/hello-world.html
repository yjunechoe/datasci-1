<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.5.57">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">

<meta name="author" content="Katie Schuler">
<meta name="dcterms.date" content="2024-08-27">

<title>Week 1: R Basics – DataSci for Lang &amp; Mind</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
</style>


<script src="../site_libs/quarto-nav/quarto-nav.js"></script>
<script src="../site_libs/quarto-nav/headroom.min.js"></script>
<script src="../site_libs/clipboard/clipboard.min.js"></script>
<script src="../site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="../site_libs/quarto-search/fuse.min.js"></script>
<script src="../site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="../">
<script src="../site_libs/quarto-html/quarto.js"></script>
<script src="../site_libs/quarto-html/popper.min.js"></script>
<script src="../site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="../site_libs/quarto-html/anchor.min.js"></script>
<link href="../site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="../site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="../site_libs/bootstrap/bootstrap.min.js"></script>
<link href="../site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="../site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "location": "sidebar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "start",
  "type": "textbox",
  "limit": 50,
  "keyboard-shortcut": [
    "f",
    "/",
    "s"
  ],
  "show-item-context": false,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-text-placeholder": "",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script>


<link rel="stylesheet" href="../include/webex.css">
</head>

<body class="nav-sidebar docked">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
  <nav class="quarto-secondary-nav">
    <div class="container-fluid d-flex">
      <button type="button" class="quarto-btn-toggle btn" data-bs-toggle="collapse" role="button" data-bs-target=".quarto-sidebar-collapse-item" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
        <i class="bi bi-layout-text-sidebar-reverse"></i>
      </button>
        <nav class="quarto-page-breadcrumbs" aria-label="breadcrumb"><ol class="breadcrumb"><li class="breadcrumb-item">
      DataSci for Lang &amp; Mind
      </li></ol></nav>
        <a class="flex-grow-1" role="navigation" data-bs-toggle="collapse" data-bs-target=".quarto-sidebar-collapse-item" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">      
        </a>
      <button type="button" class="btn quarto-search-button" aria-label="Search" onclick="window.quartoOpenSearch();">
        <i class="bi bi-search"></i>
      </button>
    </div>
  </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article">
<!-- sidebar -->
  <nav id="quarto-sidebar" class="sidebar collapse collapse-horizontal quarto-sidebar-collapse-item sidebar-navigation docked overflow-auto">
    <div class="pt-lg-2 mt-2 text-left sidebar-header">
    <div class="sidebar-title mb-0 py-0">
      <a href="../">DataSci for Lang &amp; Mind</a> 
    </div>
      </div>
        <div class="mt-2 flex-shrink-0 align-items-center">
        <div class="sidebar-search">
        <div id="quarto-search" class="" title="Search"></div>
        </div>
        </div>
    <div class="sidebar-menu-container"> 
    <ul class="list-unstyled mt-1">
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../index.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Syllabus</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../index.html#resources" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Resources</span></a>
  </div>
</li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a href="../index.html#materials" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Materials</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-1" role="navigation" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-1" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../index.html#study-guides" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Study guides</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../index.html#problem-sets" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Problem sets</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../index.html#exams" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Exams</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../index.html#lab-exercises" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Lab exercises</span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../index.html#schedule" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Schedule</span></a>
  </div>
</li>
    </ul>
    </div>
</nav>
<div id="quarto-sidebar-glass" class="quarto-sidebar-collapse-item" data-bs-toggle="collapse" data-bs-target=".quarto-sidebar-collapse-item"></div>
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">On this page</h2>
   
  <ul>
  <li><a href="#welcome" id="toc-welcome" class="nav-link active" data-scroll-target="#welcome"><span class="header-section-number">1</span> Welcome</a>
  <ul class="collapse">
  <li><a href="#paperwork" id="toc-paperwork" class="nav-link" data-scroll-target="#paperwork"><span class="header-section-number">1.1</span> Paperwork</a></li>
  <li><a href="#announcements" id="toc-announcements" class="nav-link" data-scroll-target="#announcements"><span class="header-section-number">1.2</span> Announcements</a></li>
  <li><a href="#course-description" id="toc-course-description" class="nav-link" data-scroll-target="#course-description"><span class="header-section-number">1.3</span> Course description</a></li>
  <li><a href="#prerequisites" id="toc-prerequisites" class="nav-link" data-scroll-target="#prerequisites"><span class="header-section-number">1.4</span> Prerequisites</a></li>
  <li><a href="#teaching-team" id="toc-teaching-team" class="nav-link" data-scroll-target="#teaching-team"><span class="header-section-number">1.5</span> Teaching team</a></li>
  <li><a href="#about-me-your-instructor-katie" id="toc-about-me-your-instructor-katie" class="nav-link" data-scroll-target="#about-me-your-instructor-katie"><span class="header-section-number">1.6</span> About me, your instructor (Katie)</a></li>
  <li><a href="#my-assumptions-about-you" id="toc-my-assumptions-about-you" class="nav-link" data-scroll-target="#my-assumptions-about-you"><span class="header-section-number">1.7</span> My assumptions about you</a></li>
  </ul></li>
  <li><a href="#course-overview" id="toc-course-overview" class="nav-link" data-scroll-target="#course-overview"><span class="header-section-number">2</span> Course overview</a>
  <ul class="collapse">
  <li><a href="#data-science" id="toc-data-science" class="nav-link" data-scroll-target="#data-science"><span class="header-section-number">2.1</span> Data science</a></li>
  <li><a href="#but-we-have-new-tools-and-lots-more-data" id="toc-but-we-have-new-tools-and-lots-more-data" class="nav-link" data-scroll-target="#but-we-have-new-tools-and-lots-more-data"><span class="header-section-number">2.2</span> But we have new tools and lots more data!</a></li>
  <li><a href="#data-science-workflow" id="toc-data-science-workflow" class="nav-link" data-scroll-target="#data-science-workflow"><span class="header-section-number">2.3</span> Data science workflow</a></li>
  <li><a href="#overview-of-course" id="toc-overview-of-course" class="nav-link" data-scroll-target="#overview-of-course"><span class="header-section-number">2.4</span> Overview of course</a></li>
  <li><a href="#overview-of-course-1" id="toc-overview-of-course-1" class="nav-link" data-scroll-target="#overview-of-course-1"><span class="header-section-number">2.5</span> Overview of course</a></li>
  <li><a href="#overview-of-course-2" id="toc-overview-of-course-2" class="nav-link" data-scroll-target="#overview-of-course-2"><span class="header-section-number">2.6</span> Overview of course</a></li>
  <li><a href="#syllabus-briefly" id="toc-syllabus-briefly" class="nav-link" data-scroll-target="#syllabus-briefly"><span class="header-section-number">2.7</span> Syllabus, briefly</a></li>
  <li><a href="#syllabus-briefly-1" id="toc-syllabus-briefly-1" class="nav-link" data-scroll-target="#syllabus-briefly-1"><span class="header-section-number">2.8</span> Syllabus, briefly</a></li>
  <li><a href="#syllabus-briefly-2" id="toc-syllabus-briefly-2" class="nav-link" data-scroll-target="#syllabus-briefly-2"><span class="header-section-number">2.9</span> Syllabus, briefly</a></li>
  <li><a href="#resources" id="toc-resources" class="nav-link" data-scroll-target="#resources"><span class="header-section-number">2.10</span> Resources</a></li>
  <li><a href="#wellness-resources" id="toc-wellness-resources" class="nav-link" data-scroll-target="#wellness-resources"><span class="header-section-number">2.11</span> Wellness resources</a></li>
  <li><a href="#why-r" id="toc-why-r" class="nav-link" data-scroll-target="#why-r"><span class="header-section-number">2.12</span> Why R?</a></li>
  <li><a href="#many-ways-to-use-r" id="toc-many-ways-to-use-r" class="nav-link" data-scroll-target="#many-ways-to-use-r"><span class="header-section-number">2.13</span> Many ways to use R</a></li>
  <li><a href="#google-colab" id="toc-google-colab" class="nav-link" data-scroll-target="#google-colab"><span class="header-section-number">2.14</span> Google Colab</a></li>
  <li><a href="#secretly-r" id="toc-secretly-r" class="nav-link" data-scroll-target="#secretly-r"><span class="header-section-number">2.15</span> Secretly, R!</a></li>
  </ul></li>
  <li><a href="#lets-try-it" id="toc-lets-try-it" class="nav-link" data-scroll-target="#lets-try-it"><span class="header-section-number">3</span> Let’s try it!</a>
  <ul class="collapse">
  <li><a href="#open-a-new-r-notebook" id="toc-open-a-new-r-notebook" class="nav-link" data-scroll-target="#open-a-new-r-notebook"><span class="header-section-number">3.1</span> Open a new R notebook:</a></li>
  <li><a href="#cell-types" id="toc-cell-types" class="nav-link" data-scroll-target="#cell-types"><span class="header-section-number">3.2</span> Cell types:</a></li>
  <li><a href="#left-sidebar" id="toc-left-sidebar" class="nav-link" data-scroll-target="#left-sidebar"><span class="header-section-number">3.3</span> Left sidebar:</a></li>
  <li><a href="#frequently-used-menu-options" id="toc-frequently-used-menu-options" class="nav-link" data-scroll-target="#frequently-used-menu-options"><span class="header-section-number">3.4</span> Frequently used menu options:</a></li>
  <li><a href="#frequently-used-keyboard-shortcuts" id="toc-frequently-used-keyboard-shortcuts" class="nav-link" data-scroll-target="#frequently-used-keyboard-shortcuts"><span class="header-section-number">3.5</span> Frequently used keyboard shortcuts:</a></li>
  </ul></li>
  <li><a href="#r-basics" id="toc-r-basics" class="nav-link" data-scroll-target="#r-basics"><span class="header-section-number">4</span> R Basics</a>
  <ul class="collapse">
  <li><a href="#expressions" id="toc-expressions" class="nav-link" data-scroll-target="#expressions"><span class="header-section-number">4.1</span> Expressions</a></li>
  </ul></li>
  <li><a href="#see-you-next-time" id="toc-see-you-next-time" class="nav-link" data-scroll-target="#see-you-next-time"><span class="header-section-number">5</span> See you next time!</a></li>
  </ul>
<div class="quarto-alternate-formats"><h2>Other Formats</h2><ul><li><a href="hello-world.html"><i class="bi bi-file-slides"></i>RevealJS</a></li><li><a href="hello-world.pdf"><i class="bi bi-file-pdf"></i>PDF</a></li></ul></div></nav>
    </div>
<!-- main -->
<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title">Week 1: R Basics</h1>
<p class="subtitle lead">Data Science for Studying Language and the Mind</p>
</div>



<div class="quarto-title-meta">

    <div>
    <div class="quarto-title-meta-heading">Author</div>
    <div class="quarto-title-meta-contents">
             <p>Katie Schuler </p>
          </div>
  </div>
    
    <div>
    <div class="quarto-title-meta-heading">Published</div>
    <div class="quarto-title-meta-contents">
      <p class="date">August 27, 2024</p>
    </div>
  </div>
  
    
  </div>
  


</header>


<section id="welcome" class="level1" data-number="1">
<h1 data-number="1"><span class="header-section-number">1</span> Welcome</h1>
<p>Follow along on the <a href="https://kathrynschuler.com/datasci/">syllabus</a>!</p>
<section id="paperwork" class="level2" data-number="1.1">
<h2 data-number="1.1" class="anchored" data-anchor-id="paperwork"><span class="header-section-number">1.1</span> Paperwork</h2>
<ul>
<li><p>When you arrive, complete this anonymous form: <a href="https://forms.gle/T7DCaURGkdMw9maZ8">Who’s in class</a></p></li>
<li><p>You can also join the <a href="https://forms.gle/y7uw9aeg75yZdshL7">waitlist</a> if you are not enrolled</p></li>
</ul>
</section>
<section id="announcements" class="level2" data-number="1.2">
<h2 data-number="1.2" class="anchored" data-anchor-id="announcements"><span class="header-section-number">1.2</span> Announcements</h2>
<ul>
<li>The course is full and the room is full</li>
<li>Ways to join:
<ol type="1">
<li>Watch for an opening (highest odds of getting in)</li>
<li>Add your name to our <a href="https://forms.gle/y7uw9aeg75yZdshL7">waitlist</a></li>
</ol></li>
</ul>
</section>
<section id="course-description" class="level2 smaller" data-number="1.3">
<h2 class="smaller anchored" data-number="1.3" data-anchor-id="course-description"><span class="header-section-number">1.3</span> Course description</h2>
<p>Data Sci for Lang &amp; Mind is an entry-level course designed to teach basic principles of statistics and data science to students with little or no background in statistics or computer science. Students will learn to identify patterns in data using visualizations and descriptive statistics; make predictions from data using machine learning and optimization; and quantify the certainty of their predictions using statistical models. This course aims to help students build a foundation of critical thinking and computational skills that will allow them to work with data in all fields related to the study of the mind (e.g.&nbsp;linguistics, psychology, philosophy, cognitive science, neuroscience).</p>
</section>
<section id="prerequisites" class="level2 smaller" data-number="1.4">
<h2 class="smaller anchored" data-number="1.4" data-anchor-id="prerequisites"><span class="header-section-number">1.4</span> Prerequisites</h2>
<p>There are <em>no prerequisites beyond high school algebra</em>. No prior programming or statistics experience is necessary, though you will still enjoy this course if you already have a little. Students who have taken several computer science or statistics classes should look for a more advanced course.</p>
</section>
<section id="teaching-team" class="level2" data-number="1.5">
<h2 data-number="1.5" class="anchored" data-anchor-id="teaching-team"><span class="header-section-number">1.5</span> Teaching team</h2>
<p><strong>Instructor</strong>: <a href="https://kathrynschuler.com">Dr.&nbsp;Katie Schuler (she/her)</a></p>
<p><strong>TAs</strong>:</p>
<ul>
<li>Brittany Zykoski</li>
<li>Wesley Lincoln</li>
</ul>
</section>
<section id="about-me-your-instructor-katie" class="level2" data-number="1.6">
<h2 data-number="1.6" class="anchored" data-anchor-id="about-me-your-instructor-katie"><span class="header-section-number">1.6</span> About me, your instructor (Katie)</h2>
<ul>
<li><p>You can call me Professor Schuler or Katie, whichever makes you more comfortable</p></li>
<li><p>I live in Mt Airy with my husband and two kids (Dory, 2 and Joan, 6)</p></li>
<li><p>At Penn I also have a research lab, the Child Language Lab and am on the Natural Science and Math Panel (a group focused on improving inclusive teaching in STEM at Penn).</p></li>
<li><p>I’m a first-generation college student from Western NY. I worked 40 hours a week to put myself through college; I am still paying off my student loans.</p></li>
</ul>
</section>
<section id="my-assumptions-about-you" class="level2" data-number="1.7">
<h2 data-number="1.7" class="anchored" data-anchor-id="my-assumptions-about-you"><span class="header-section-number">1.7</span> My assumptions about you</h2>
<p>You are an honest, kind, and hardworking student who wants to do well in and enjoy this class</p>
<p>. . .</p>
<p>You are very busy, and will sometimes have to prioritize other things above this class.</p>
</section>
</section>
<section id="course-overview" class="level1" data-number="2">
<h1 data-number="2"><span class="header-section-number">2</span> Course overview</h1>
<section id="data-science" class="level2" data-number="2.1">
<h2 data-number="2.1" class="anchored" data-anchor-id="data-science"><span class="header-section-number">2.1</span> Data science</h2>
<p>Data science is about making decisions based on incomplete information.</p>
<p>. . .</p>
<div id="fig-visualillusion" class="quarto-float quarto-figure quarto-figure-left anchored" data-fig-align="left">
<figure class="quarto-float quarto-float-fig figure">
<div aria-describedby="fig-visualillusion-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<img src="../assests/images/visual-illusion.png" class="img-fluid quarto-figure quarto-figure-left figure-img" style="width:30.0%">
</div>
<figcaption class="quarto-float-caption-bottom quarto-float-caption quarto-float-fig" id="fig-visualillusion-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Figure&nbsp;1: from Kok &amp; de Lange (2014)
</figcaption>
</figure>
</div>
<p>This concept is not new. Brains were built for doing this!</p>
</section>
<section id="but-we-have-new-tools-and-lots-more-data" class="level2" data-number="2.2">
<h2 data-number="2.2" class="anchored" data-anchor-id="but-we-have-new-tools-and-lots-more-data"><span class="header-section-number">2.2</span> But we have new tools and lots more data!</h2>
<p>. . .</p>
<div id="fig-dataneversleeps" class="quarto-float quarto-figure quarto-figure-left anchored" data-fig-align="left">
<figure class="quarto-float quarto-float-fig figure">
<div aria-describedby="fig-dataneversleeps-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<img src="../assests/images/data-never-sleeps.png" class="img-fluid quarto-figure quarto-figure-left figure-img" style="width:80.0%">
</div>
<figcaption class="quarto-float-caption-bottom quarto-float-caption quarto-float-fig" id="fig-dataneversleeps-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Figure&nbsp;2: from https://web-assets.domo.com/miyagi/images/product/product-feature-22-data-never-sleeps-10.png
</figcaption>
</figure>
</div>
</section>
<section id="data-science-workflow" class="level2" data-number="2.3">
<h2 data-number="2.3" class="anchored" data-anchor-id="data-science-workflow"><span class="header-section-number">2.3</span> Data science workflow</h2>
<p>The folks who wrote <a href="https://r4ds.hadley.nz/">R for Data Science</a> proposed the following data science workflow:</p>
<p>. . .</p>
<div id="fig-datascience" class="quarto-float quarto-figure quarto-figure-left anchored" data-fig-align="left">
<figure class="quarto-float quarto-float-fig figure">
<div aria-describedby="fig-datascience-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<img src="../assests/images/data-science-workflow.png" class="img-fluid quarto-figure quarto-figure-left figure-img" style="width:80.0%">
</div>
<figcaption class="quarto-float-caption-bottom quarto-float-caption quarto-float-fig" id="fig-datascience-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Figure&nbsp;3: from R for Data Science
</figcaption>
</figure>
</div>
</section>
<section id="overview-of-course" class="level2" data-number="2.4">
<h2 data-number="2.4" class="anchored" data-anchor-id="overview-of-course"><span class="header-section-number">2.4</span> Overview of course</h2>
<p>We will spend the first few weeks getting comfortable <strong>programming in R</strong>, including some useful skills for data science:</p>
<ul>
<li>R basics</li>
<li>Data visualization</li>
<li>Data wrangling (import, tidy, and transform)</li>
</ul>
</section>
<section id="overview-of-course-1" class="level2" data-number="2.5">
<h2 data-number="2.5" class="anchored" data-anchor-id="overview-of-course-1"><span class="header-section-number">2.5</span> Overview of course</h2>
<p>Then, we will spend the next several weeks building a <strong>foundation in basic statistics and model building</strong>:</p>
<ul>
<li>Sampling distribution</li>
<li>Hypothesis testing</li>
<li>Model specification</li>
<li>Model fitting</li>
<li>Model accuracy</li>
<li>Model reliability</li>
</ul>
</section>
<section id="overview-of-course-2" class="level2" data-number="2.6">
<h2 data-number="2.6" class="anchored" data-anchor-id="overview-of-course-2"><span class="header-section-number">2.6</span> Overview of course</h2>
<p>Finally we will cover a selection of <strong>more advanced topics</strong> that are often applied in language and mind fields, with a focus on basic understanding:</p>
<ul>
<li>Classification</li>
<li>Inference for regression</li>
<li>Mixed-effect models</li>
</ul>
</section>
<section id="syllabus-briefly" class="level2" data-number="2.7">
<h2 data-number="2.7" class="anchored" data-anchor-id="syllabus-briefly"><span class="header-section-number">2.7</span> Syllabus, briefly</h2>
<p>Each week will include two lectures and a lab:</p>
<ul>
<li><strong>Lectures</strong> are on Tuesdays and Thursdays at 12pm and will be a mix of conceptual overviews and R tutorials. It is a good idea to bring your laptop so you can follow along and try stuff in R!</li>
<li><strong>Labs</strong> are on Thursday or Friday and will consist of (ungraded) practice problems and concept review with TAs. You may attend any lab section that works for your schedule.</li>
</ul>
</section>
<section id="syllabus-briefly-1" class="level2" data-number="2.8">
<h2 data-number="2.8" class="anchored" data-anchor-id="syllabus-briefly-1"><span class="header-section-number">2.8</span> Syllabus, briefly</h2>
<p>There are 8 graded assessments:</p>
<ul>
<li><strong>6 Problem sets (40%)</strong> in which you will be asked to apply your newly aquired R programming skills.</li>
<li><strong>2 Midterm exams (60%)</strong> in which you will be tested on your understanding of lecture concepts.</li>
</ul>
</section>
<section id="syllabus-briefly-2" class="level2 smaller" data-number="2.9">
<h2 class="smaller anchored" data-number="2.9" data-anchor-id="syllabus-briefly-2"><span class="header-section-number">2.9</span> Syllabus, briefly</h2>
<p>There are a few policies to take note of:</p>
<ul>
<li>Missed exams cannot be made up except in cases of genuine conflict or emergency (documentation and course action notice required). You may take the optional final exam to replace a missed or low scoring exam.</li>
<li>You may request an extension on any problem set of up to 3 days. But extensions beyond 3 days will not be granted (because delying solutions will negative impact other students).</li>
<li>You may submit any missed quiz or problem set by the end of the semester for half-credit (50%), even after solutions are posted.</li>
<li>We will drop your lowest pset grade, but you must turn in all 6 assignements to be eligible.</li>
</ul>
</section>
<section id="resources" class="level2" data-number="2.10">
<h2 data-number="2.10" class="anchored" data-anchor-id="resources"><span class="header-section-number">2.10</span> Resources</h2>
<p>In addition to our course website, we will use the following:</p>
<ul>
<li><a href="https://colab.research.google.com/#create=true&amp;language=r">google colab (r kernel)</a> - for computing</li>
<li><a href="https://canvas.upenn.edu/courses/1809306">canvas</a>- for posting grades</li>
<li><a href="https://www.gradescope.com/courses/814032">gradescope</a> - for submitting problem sets</li>
<li><a href="https://edstem.org/us/courses/61540/discussion/">ed discussion</a> - for announcements and questions</li>
</ul>
</section>
<section id="wellness-resources" class="level2" data-number="2.11">
<h2 data-number="2.11" class="anchored" data-anchor-id="wellness-resources"><span class="header-section-number">2.11</span> Wellness resources</h2>
<p>Please consider using these Penn resources this semester:</p>
<ul>
<li><a href="https://weingartencenter.universitylife.upenn.edu/academic-support/">Weingarten Center</a> for academic support and tutoring.</li>
<li><a href="https://wellness.upenn.edu/">Wellness at Penn</a> for health and wellbeing.</li>
</ul>
</section>
<section id="why-r" class="level2" data-number="2.12">
<h2 data-number="2.12" class="anchored" data-anchor-id="why-r"><span class="header-section-number">2.12</span> Why R?</h2>
<p>With many programming languages available for data science (e.g.&nbsp;R, Python, Julia, MATLAB), why use R?</p>
<ul>
<li>Built for stats, specifically</li>
<li>Makes nice visualizations</li>
<li>Lots of people are doing it, especially in academia</li>
<li>Easier for beginners to understand</li>
<li>Free and open source (though so are Python and Julia, MATLAB costs $)</li>
</ul>
</section>
<section id="many-ways-to-use-r" class="level2" data-number="2.13">
<h2 data-number="2.13" class="anchored" data-anchor-id="many-ways-to-use-r"><span class="header-section-number">2.13</span> Many ways to use R</h2>
<ul>
<li><a href="https://posit.co/products/open-source/rstudio/">R Studio</a></li>
<li><a href="https://jupyter.org/">Jupyter</a></li>
<li><a href="https://code.visualstudio.com/docs/languages/r">VS Code</a></li>
<li>and even simply the <a href="http://mercury.webster.edu/aleshunas/R_learning_infrastructure/Using%20the%20R%20command%20line.html">command line/terminal</a></li>
</ul>
</section>
<section id="google-colab" class="level2" data-number="2.14">
<h2 data-number="2.14" class="anchored" data-anchor-id="google-colab"><span class="header-section-number">2.14</span> Google Colab</h2>
<ul>
<li><strong>Google Colab</strong> is a cloud-based Jupyter notebook that allows you to write, execute, and share code like a google doc.</li>
<li>We use Google Colab because it’s simple and accessible to everyone. You can start programming right away, no setup required!</li>
</ul>
</section>
<section id="secretly-r" class="level2" data-number="2.15">
<h2 data-number="2.15" class="anchored" data-anchor-id="secretly-r"><span class="header-section-number">2.15</span> Secretly, R!</h2>
<p>Google Colab officially supports Python, but secretly supports R (and <a href="https://colab.research.google.com/github/ageron/julia_notebooks/blob/master/Julia_Colab_Notebook_Template.ipynb">Julia</a>, too!)</p>
<ul>
<li><p>Update 2024: Google Colab now officially supports R!</p></li>
<li><p><a href="https://colab.research.google.com/#create=true&amp;language=r">colab (r kernel)</a></p></li>
</ul>
</section>
</section>
<section id="lets-try-it" class="level1" data-number="3">
<h1 data-number="3"><span class="header-section-number">3</span> Let’s try it!</h1>
<p>Google colab demo</p>
<section id="open-a-new-r-notebook" class="level2" data-number="3.1">
<h2 data-number="3.1" class="anchored" data-anchor-id="open-a-new-r-notebook"><span class="header-section-number">3.1</span> Open a new R notebook:</h2>
<ul>
<li><a href="https://colab.research.google.com/#create=true&amp;language=r">colab (r kernel)</a> - use this link to start a new R notebook</li>
<li><code>File &gt; New notebook</code> and then <code>Runtime</code> &gt; <code>Change runtime type</code> to R</li>
</ul>
</section>
<section id="cell-types" class="level2" data-number="3.2">
<h2 data-number="3.2" class="anchored" data-anchor-id="cell-types"><span class="header-section-number">3.2</span> Cell types:</h2>
<ul>
<li><code>+ Code</code> - write and execute code</li>
<li><code>+ Text</code> - write text blocks in <a href="https://www.markdowntutorial.com/">markdown</a></li>
</ul>
</section>
<section id="left-sidebar" class="level2" data-number="3.3">
<h2 data-number="3.3" class="anchored" data-anchor-id="left-sidebar"><span class="header-section-number">3.3</span> Left sidebar:</h2>
<ul>
<li><code>Table of contents</code> - outline from text headings</li>
<li><code>Find and replace</code> - find and/or replace</li>
<li><code>Files</code> - upload files to cloud session</li>
</ul>
</section>
<section id="frequently-used-menu-options" class="level2" data-number="3.4">
<h2 data-number="3.4" class="anchored" data-anchor-id="frequently-used-menu-options"><span class="header-section-number">3.4</span> Frequently used menu options:</h2>
<ul>
<li><code>File &gt; Locate in Drive</code> - where in your Google Drive?</li>
<li><code>File &gt; Save</code> - saves</li>
<li><code>File &gt; Revision history</code> - history of changes you made</li>
<li><code>File &gt; Download &gt; Download .ipynb</code> - used to submit assignments!</li>
<li><code>File &gt; Print</code> - prints</li>
<li><code>Runtime &gt; Run all</code> - run all cells</li>
<li><code>Runtime &gt; Run before</code> - run all cells before current active cell</li>
<li><code>Runtime &gt; Restart and run all</code> - restart runtime, then run all</li>
</ul>
</section>
<section id="frequently-used-keyboard-shortcuts" class="level2" data-number="3.5">
<h2 data-number="3.5" class="anchored" data-anchor-id="frequently-used-keyboard-shortcuts"><span class="header-section-number">3.5</span> Frequently used keyboard shortcuts:</h2>
<ul>
<li><code>Cmd/Ctrl+S</code> - save</li>
<li><code>Cmd/Ctrl+Enter</code> - run focused cell</li>
<li><code>Cmd/Ctrl+Shift+A</code> - select all cells</li>
<li><code>Cmd/Ctrl+/</code> - comment/uncomment selection</li>
<li><code>Cmd/Ctrl+]</code> - increase indent</li>
<li><code>Cmd/Ctrl+[</code> - decrease indent</li>
</ul>
</section>
</section>
<section id="r-basics" class="level1" data-number="4">
<h1 data-number="4"><span class="header-section-number">4</span> R Basics</h1>
<p>We begin by defining some basic concepts:</p>
<section id="expressions" class="level2" data-number="4.1">
<h2 data-number="4.1" class="anchored" data-anchor-id="expressions"><span class="header-section-number">4.1</span> Expressions</h2>
<ul>
<li><strong>Expressions</strong> are combinations of values, variables, operators, and functions that can be evaluated to produce a result. Expressions can be as simple as a single value or more complex involving calculations, comparisons, and function calls. They are the fundamental building blocks of programming.
<ul>
<li><code>10</code> - a simple value expression that evaluates to <code>10</code>.</li>
<li><code>x &lt;- 10</code> - an expression that assigns the value of <code>10</code> to <code>x</code>.</li>
<li><code>x + 10</code> - an expression that adds the value of <code>x</code> to <code>10</code>.</li>
<li><code>a &lt;- x + 10</code> - an expression that adds the value of <code>x</code> to <code>10</code> and assigns the result to the variable <code>a</code></li>
</ul></li>
</ul>
</section>
</section>
<section id="see-you-next-time" class="level1" data-number="5">
<h1 data-number="5"><span class="header-section-number">5</span> See you next time!</h1>
<p>Looking forward to a great semester.</p>


</section>

</main> <!-- /main -->
<script>

/* update total correct if #webex-total_correct exists */
update_total_correct = function() {
  console.log("webex: update total_correct");

  var t = document.getElementsByClassName("webex-total_correct");
  for (var i = 0; i < t.length; i++) {
    p = t[i].parentElement;
    var correct = p.getElementsByClassName("webex-correct").length;
    var solvemes = p.getElementsByClassName("webex-solveme").length;
    var radiogroups = p.getElementsByClassName("webex-radiogroup").length;
    var selects = p.getElementsByClassName("webex-select").length;

    t[i].innerHTML = correct + " of " + (solvemes + radiogroups + selects) + " correct";
  }
}

/* webex-solution button toggling function */
b_func = function() {
  console.log("webex: toggle hide");

  var cl = this.parentElement.classList;
  if (cl.contains('open')) {
    cl.remove("open");
  } else {
    cl.add("open");
  }
}

/* check answers */
check_func = function() {
  console.log("webex: check answers");

  var cl = this.parentElement.classList;
  if (cl.contains('unchecked')) {
    cl.remove("unchecked");
    this.innerHTML = "Hide Answers";
  } else {
    cl.add("unchecked");
    this.innerHTML = "Show Answers";
  }
}

/* function for checking solveme answers */
solveme_func = function(e) {
  console.log("webex: check solveme");

  var real_answers = JSON.parse(this.dataset.answer);
  var my_answer = this.value;
  var cl = this.classList;
  if (cl.contains("ignorecase")) {
    my_answer = my_answer.toLowerCase();
  }
  if (cl.contains("nospaces")) {
    my_answer = my_answer.replace(/ /g, "")
  }

  if (my_answer == "") {
    cl.remove("webex-correct");
    cl.remove("webex-incorrect");
  } else if (real_answers.includes(my_answer)) {
    cl.add("webex-correct");
    cl.remove("webex-incorrect");
  } else {
    cl.add("webex-incorrect");
    cl.remove("webex-correct");
  }

  // match numeric answers within a specified tolerance
  if(this.dataset.tol > 0){
    var tol = JSON.parse(this.dataset.tol);
    var matches = real_answers.map(x => Math.abs(x - my_answer) < tol)
    if (matches.reduce((a, b) => a + b, 0) > 0) {
      cl.add("webex-correct");
    } else {
      cl.remove("webex-correct");
    }
  }

  // added regex bit
  if (cl.contains("regex")){
    answer_regex = RegExp(real_answers.join("|"))
    if (answer_regex.test(my_answer)) {
      cl.add("webex-correct");
    }
  }

  update_total_correct();
}

/* function for checking select answers */
select_func = function(e) {
  console.log("webex: check select");

  var cl = this.classList

  /* add style */
  cl.remove("webex-incorrect");
  cl.remove("webex-correct");
  if (this.value == "answer") {
    cl.add("webex-correct");
  } else if (this.value != "blank") {
    cl.add("webex-incorrect");
  }

  update_total_correct();
}

/* function for checking radiogroups answers */
radiogroups_func = function(e) {
  console.log("webex: check radiogroups");

  var checked_button = document.querySelector('input[name=' + this.id + ']:checked');
  var cl = checked_button.parentElement.classList;
  var labels = checked_button.parentElement.parentElement.children;

  /* get rid of styles */
  for (i = 0; i < labels.length; i++) {
    labels[i].classList.remove("webex-incorrect");
    labels[i].classList.remove("webex-correct");
  }

  /* add style */
  if (checked_button.value == "answer") {
    cl.add("webex-correct");
  } else {
    cl.add("webex-incorrect");
  }

  update_total_correct();
}

window.onload = function() {
  console.log("webex onload");
  /* set up solution buttons */
  var buttons = document.getElementsByTagName("button");

  for (var i = 0; i < buttons.length; i++) {
    if (buttons[i].parentElement.classList.contains('webex-solution')) {
      buttons[i].onclick = b_func;
    }
  }

  var check_sections = document.getElementsByClassName("webex-check");
  console.log("check:", check_sections.length);
  for (var i = 0; i < check_sections.length; i++) {
    check_sections[i].classList.add("unchecked");

    let btn = document.createElement("button");
    btn.innerHTML = "Show Answers";
    btn.classList.add("webex-check-button");
    btn.onclick = check_func;
    check_sections[i].appendChild(btn);

    let spn = document.createElement("span");
    spn.classList.add("webex-total_correct");
    check_sections[i].appendChild(spn);
  }

  /* set up webex-solveme inputs */
  var solveme = document.getElementsByClassName("webex-solveme");

  for (var i = 0; i < solveme.length; i++) {
    /* make sure input boxes don't auto-anything */
    solveme[i].setAttribute("autocomplete","off");
    solveme[i].setAttribute("autocorrect", "off");
    solveme[i].setAttribute("autocapitalize", "off");
    solveme[i].setAttribute("spellcheck", "false");
    solveme[i].value = "";

    /* adjust answer for ignorecase or nospaces */
    var cl = solveme[i].classList;
    var real_answer = solveme[i].dataset.answer;
    if (cl.contains("ignorecase")) {
      real_answer = real_answer.toLowerCase();
    }
    if (cl.contains("nospaces")) {
      real_answer = real_answer.replace(/ /g, "");
    }
    solveme[i].dataset.answer = real_answer;

    /* attach checking function */
    solveme[i].onkeyup = solveme_func;
    solveme[i].onchange = solveme_func;

    solveme[i].insertAdjacentHTML("afterend", " <span class='webex-icon'></span>")
  }

  /* set up radiogroups */
  var radiogroups = document.getElementsByClassName("webex-radiogroup");
  for (var i = 0; i < radiogroups.length; i++) {
    radiogroups[i].onchange = radiogroups_func;
  }

  /* set up selects */
  var selects = document.getElementsByClassName("webex-select");
  for (var i = 0; i < selects.length; i++) {
    selects[i].onchange = select_func;
    selects[i].insertAdjacentHTML("afterend", " <span class='webex-icon'></span>")
  }

  update_total_correct();
}

</script>
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const onCopySuccess = function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  }
  const getTextToCopy = function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button:not([data-in-quarto-modal])', {
    text: getTextToCopy
  });
  clipboard.on('success', onCopySuccess);
  if (window.document.getElementById('quarto-embedded-source-code-modal')) {
    // For code content inside modals, clipBoardJS needs to be initialized with a container option
    // TODO: Check when it could be a function (https://github.com/zenorocha/clipboard.js/issues/860)
    const clipboardModal = new window.ClipboardJS('.code-copy-button[data-in-quarto-modal]', {
      text: getTextToCopy,
      container: window.document.getElementById('quarto-embedded-source-code-modal')
    });
    clipboardModal.on('success', onCopySuccess);
  }
    var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
    var mailtoRegex = new RegExp(/^mailto:/);
      var filterRegex = new RegExp('/' + window.location.host + '/');
    var isInternal = (href) => {
        return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
    }
    // Inspect non-navigation links and adorn them if external
 	var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool):not(.about-link)');
    for (var i=0; i<links.length; i++) {
      const link = links[i];
      if (!isInternal(link.href)) {
        // undo the damage that might have been done by quarto-nav.js in the case of
        // links that we want to consider external
        if (link.dataset.originalHref !== undefined) {
          link.href = link.dataset.originalHref;
        }
      }
    }
  function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
    const config = {
      allowHTML: true,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start',
    };
    if (contentFn) {
      config.content = contentFn;
    }
    if (onTriggerFn) {
      config.onTrigger = onTriggerFn;
    }
    if (onUntriggerFn) {
      config.onUntrigger = onUntriggerFn;
    }
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      if (note) {
        return note.innerHTML;
      } else {
        return "";
      }
    });
  }
  const xrefs = window.document.querySelectorAll('a.quarto-xref');
  const processXRef = (id, note) => {
    // Strip column container classes
    const stripColumnClz = (el) => {
      el.classList.remove("page-full", "page-columns");
      if (el.children) {
        for (const child of el.children) {
          stripColumnClz(child);
        }
      }
    }
    stripColumnClz(note)
    if (id === null || id.startsWith('sec-')) {
      // Special case sections, only their first couple elements
      const container = document.createElement("div");
      if (note.children && note.children.length > 2) {
        container.appendChild(note.children[0].cloneNode(true));
        for (let i = 1; i < note.children.length; i++) {
          const child = note.children[i];
          if (child.tagName === "P" && child.innerText === "") {
            continue;
          } else {
            container.appendChild(child.cloneNode(true));
            break;
          }
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(container);
        }
        return container.innerHTML
      } else {
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        return note.innerHTML;
      }
    } else {
      // Remove any anchor links if they are present
      const anchorLink = note.querySelector('a.anchorjs-link');
      if (anchorLink) {
        anchorLink.remove();
      }
      if (window.Quarto?.typesetMath) {
        window.Quarto.typesetMath(note);
      }
      // TODO in 1.5, we should make sure this works without a callout special case
      if (note.classList.contains("callout")) {
        return note.outerHTML;
      } else {
        return note.innerHTML;
      }
    }
  }
  for (var i=0; i<xrefs.length; i++) {
    const xref = xrefs[i];
    tippyHover(xref, undefined, function(instance) {
      instance.disable();
      let url = xref.getAttribute('href');
      let hash = undefined; 
      if (url.startsWith('#')) {
        hash = url;
      } else {
        try { hash = new URL(url).hash; } catch {}
      }
      if (hash) {
        const id = hash.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note !== null) {
          try {
            const html = processXRef(id, note.cloneNode(true));
            instance.setContent(html);
          } finally {
            instance.enable();
            instance.show();
          }
        } else {
          // See if we can fetch this
          fetch(url.split('#')[0])
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.getElementById(id);
            if (note !== null) {
              const html = processXRef(id, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      } else {
        // See if we can fetch a full url (with no hash to target)
        // This is a special case and we should probably do some content thinning / targeting
        fetch(url)
        .then(res => res.text())
        .then(html => {
          const parser = new DOMParser();
          const htmlDoc = parser.parseFromString(html, "text/html");
          const note = htmlDoc.querySelector('main.content');
          if (note !== null) {
            // This should only happen for chapter cross references
            // (since there is no id in the URL)
            // remove the first header
            if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
              note.children[0].remove();
            }
            const html = processXRef(null, note);
            instance.setContent(html);
          } 
        }).finally(() => {
          instance.enable();
          instance.show();
        });
      }
    }, function(instance) {
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            div.style.left = 0;
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
        // Handle positioning of the toggle
    window.addEventListener(
      "resize",
      throttle(() => {
        elRect = undefined;
        if (selectedAnnoteEl) {
          selectCodeLines(selectedAnnoteEl);
        }
      }, 10)
    );
    function throttle(fn, ms) {
    let throttle = false;
    let timer;
      return (...args) => {
        if(!throttle) { // first call gets through
            fn.apply(this, args);
            throttle = true;
        } else { // all the others get throttled
            if(timer) clearTimeout(timer); // cancel #2
            timer = setTimeout(() => {
              fn.apply(this, args);
              timer = throttle = false;
            }, ms);
        }
      };
    }
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
</div> <!-- /content -->




</body></html>